\documentclass[mim_thesis.tex]{subfiles} 
\begin{document}
Since the start of openEHR CKM operation, a huge percentage of archetypes have been created. Many contributors have developed them around the world. With this, a lot of changes can be made to the root lining, and to not allow a divergence in the content of each created archetype, the openEHR group defined rules and methodologies for the archetype development process, commonly called Archetype Development Life Cycle (ADLC) \citep{Madsen2010}, which is based on the Software Development Life Cycle (SDLC). This process will be explained in detail in this chapter.


\section{The Archetype Development Process}
The steps for the process of an achetype development process start at the identifications of all the clinical requirements, searching if compatible or reusable archetypes exists in the openEHR CKM, if not, build the archetypes and then submit them to the openEHR CKM repository, where a process of archetype review will be made. In case of common consensus by the editors of the repository, the archetype will be published. Inside of all these steps, there are other sub-processes that needs to be done. M. Madsen in 2010 proposed the phases of an archetype development process. They are composed by:

\begin{enumerate}[noitemsep]
\item \textbf{Planning phase} - containing the content gathering and clinical engagement;
\item \textbf{Analysis phase} - data analysis and consolidation, draft modeling estimate and knowledge of current available archetypes;
\item \textbf{Requirements specification phase} - where are presented the clarifications of content questions and other issues with end users and start of a modeling plan creation;
\item \textbf{Design phase} - including the archetype design, creation of clinical models and the addition of terminology;
\item \textbf{Testing, evaluation and review phase} - review of interactions between content and terminology and modeling review;
\item \textbf{Delivery phase} - model sign-off and hand over to vendor;
\item \textbf{Maintenance phase} - fixing small issues that can appear and giving correction updates if required.
\end{enumerate}

In the first phase of the development process is necessary to define essential procedures. Usually, this is the crucial point that will allows to do not waste time and money on reviewing all the procedures in every step of development, in case of wrong initial analysis. When making an initial data analysis, is mandatory to understand and determine all the necessary initial requirements, data collection and content gathering. This can be done by analyzing the many possible sources, like the paper based forms used on the health care institutions by the physicians, understanding how the work flow is processed in these institutions and which guidelines have been used. To identify the diferent clinical concepts, the creation of a mindmap could help to visualize the gathered data during this process stage \citep{marcos2010towards}. Also, checking how the existing electronic health records present the forms and the information stored on their databases can help. All the collected information can result in a archetype that will be fitting the main purpose. Nevertheless, include all the external parties and end-users involved in the process to have basic training on the openEHR methodology should optimize the content gathering process. When the first step is almost concluded, is necessary to start a modeling process plan, which allows to have an idea of what the next process of archetype development will look like. It is always vital to have collaborative meetings to discuss the development process with end-users (health professionals), clinical modelers (e.g. health informatician), IT technicians and external parties that will be using the artifacts. This will allow to check if the requirements are being met, such as, verification of the archetypes and templates under development are aligned with the final user requirements and then maximizing the interoperability between the systems that will make use of these artifacts. One of the aims is to maximize the re-usage of each archetype created. Along with this, is time to start to prepare terminology, standards implementation, work flow and \ac{GUI} design to be used on production. \\

During the second phase, is necessary to analyze and make a consolidation of the data gathered in the first stage. This should be done by a health informatician to identify issues in the process and contact directly with the physicians to solve the problems in a accurate and correct way. In this phase, a full analysis of existing archetypes should also be made. A search should be made to check if there are already archetypes on the international openEHR CKM that fulfill the requirements or, if not, create new archetypes or improve the existing ones. Having a wide knowledge of already existing archetypes can save a lot of effort and time in this phase and the openEHR CKM works in a way to avoid the duplication of archetypes. \\

For the requirements specification phase, possible content issues should be determined with all technical modelers, \ac{UX} experts, vendors and terminologists and questions about the content should be clarified among the implementation team and the end users in an constant interaction - this specifications should reflect the real world on practice \citep{hovenga2013health}. Communication between all is the key. In the design phase, also known as the archetype design phase \citep{Madsen2010} the primary creation should be conducted by physicians, since the structure and language used should reflect the environment of the main user of those resources. In this phase, is when the archetype start to be created by the technical modeler, after gathering all the content to be used within. It startes with identification of the purpose of this archetype, the data elements to be included and the terminologies to be implemented. Then, the classification of the archetype should be done, for example, if the RM class of the desired archetype will be a instruction, action, observation or evaluation and the archetype name is defined, along with the struture, data types, constrains, metadata and the terminology mentioned previosly added to the different itens. The research made on specific articles to implement this archetype should be prepared and included. The addition of terminology, interface and modeling should be also done along this creation to maximize the development time and aim fitting. \\

Other very important stage is the testing, evaluation and review phase, where all the previous processes will be approved or not, after consensus from all the participants involved. During this phase, the end users should receive a preparatory introduction and training to the openEHR modeling to learn how to the archetype and templates work in order to help to improve the content from the artefacts, including the terminology used. The archetype modelling should also be reviewed in this phase, since each technical modeler have his own way to create different structures. This should include verification of all the archetype information present on the concept name, description, keywords, propose and use or misuse of the archetypes reviewed. Also, a comparison with other similar modeling standards should be done and feedback retrieved, for example from FHIR or HL7. When there is a consensus from all the team, everything is aligned from all the parts, this means the archetypes lifecycle can be changed to "published" and the delivery phase can start, which means that the vendors who are implementing these clinical models on their EHR systems can have access to the repository of clinical models or openEHR artefacs, like the openEHR CKM, for example. 

\begin{figure}[H]
	\centering
    \includegraphics[width=0.465\textwidth]{img/LC_ARCH.PNG}
	\caption{Initial phase of archetype creation, using the example of openEHR CKM as a clinical models repository}
	\label{fig:LC_ARCH}
\end{figure}

Like all the others IT development projects, the final stage is the maintenance. After an archetype being published, is necessary to support it and continue to provide a continuous improvement on these artefacts. There are many reasons to keep maintenance, for instance, more additions could be implemented to the archetype that may reply to more specifications or requests from the vendors or the end users, some errors or bugs could be found and need to be quickly solved or could even be necessary to make a specialization using the parent archetype. Also after an archetype being published, its phase can constantly change. If this archetype gets a major or better version, it can be replaced, turning into an obsolete archetype. \\

It is really necessary that all these procedures should be carefully prepared with usual meetings with healthcare, IT and technical professionals to make sure that the final aim will be compliant with every side. Otherwise it can result in a creation of an archetype that does not met the specifications and turn on a waste of time by not being accepted on the openEHR CKM. Also, if it is possible to always send an english version of the submitted archetype, along with the translations of other languages, this could improve the time of revision, since the bigger part of the openEHR editor are english speakers. \\

For template creation, it does not need to have the same amount of work and preparation to get specific requirements and further development, comparing with the case of the archetype, since it is only an aggregation of a set of archetypes. \\

In the figure \ref{fig:arch_auth}, is possible to see the diagram made by the openEHR team \citep{Leslie2008} that currently takes care of the openEHR artefacts governance under the international CKM. The different archetype lifecycles are represented by the yellow boxes (draft, team review, published and obsolete) and those divide the different procedures made within each phase. 


\begin{figure}[H]
	\centering
    \includegraphics[width=0.815\textwidth]{img/arch_auth.PNG}
	\caption{Archetype authoring, review and publication \citep{Leslie2008}}
	\label{fig:arch_auth}
\end{figure}




\section{Distributed governance of archetypes}

The creation of an archetype usually starts when a need is found or a request is made, which will require a an openEHR modeler to start to construct it on his own computer alone or with a team from some project. This means that this archetype will have no custodial organization (e.g. au.gov.nehta, uk.org.clinicalmodels or org.openehr) managing it, getting the v0 version, following the \textit{semVer} rules, and the life cycle identifies it as "unmanaged" - this cycle does not exist on the openEHR CKM \citep{openehrckmgover2018}. After following all the steps described in the previous sub-chapter, when the archetype is done and prepared to be submitted to some ckm instance, it needs an approval from the custodian organization that manages that instance. After being submitted and accepted by the custodian organization, it gets this custodian name in the ARCHETYPE HRID namespace, e.g. \textbf{org.openehr::}openEHR-EHR-OBSERVATION.blood\_pressure.v1.adl and a new meta-data parameter within the archetype is filled as  e.g. ["custodian\_namespace"] = <"\textbf{org.openehr}"> along with a new UUID, license and copyright. Relatively to the versioning number, the major version is reset to 0 and the other versioning parameters (minor version and path) to 0.0.1. 

\begin{figure}[H]
	\centering
    \includegraphics[width=1\textwidth]{img/development_lifecycle_with_versioning.png}
	\caption{Development Lifecycle with Versioning \citep{openehrckmgover22018}}
	\label{fig:development_lifecycle_with_versioning}
\end{figure}

Although an artefact can be accepted by a custodian organization, if this resource does not get an active maintenance, it can be rejected or migrated to another custodian organization. When this happens, the new custodian organization is allowed to make some changes on the archetype identification (human or machine readable way) under certain rules. In case of the human readable way, the \textit{namespace} can change to include the new organization, the \textit{concept\_id} (e.g. blood\_pressure) can also change depending on the new custodian requirements and the versioning parameter is usually changed to 0 (0.0.1). Since the human readable identifier (HRID) is changed, its \textit{uid} will be changed also to a new one, in conformity to the new name. Inside of the archetype content, there is a section to show the management history of an archetype that is being transfered between custodian organizations as it can be seen in table \ref{tab:arch_co_h}:

\begin{table}[H]
\caption{Archetype custodian organization history \citep{openehrckmgover2018}}
\label{tab:arch_co_h}
\centering
\begin{tabular}{l}
\toprule[2pt]
\begin{lstlisting}[language=XML]
    id_history = <
        ["2001-05-27"] = <
            old = <
                hrid = <"au.com.rbh::openEHR-EHR-EVALUATION.problem_desc.v2.4.1">
                uid = <"5221C9E5-0ECA-469F-83C5-A5D5A0C6682C">
            >
            new = <
                hrid = <"au.gov.nehta::openEHR-EHR-EVALUATION.problem.v1.0.1">
                uid = <"094C8B37-F0CD-45C9-A1B7-CDFDE14C67AB">
            >
        >
\end{lstlisting}
\tabularnewline \bottomrule[2pt]
\end{tabular}
\end{table}




\end{document}